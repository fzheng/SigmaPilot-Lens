# ===================
# Application
# ===================
APP_NAME=SigmaPilot Lens
DEBUG=false
LOG_LEVEL=INFO
LOG_FORMAT=json

# ===================
# Database
# ===================
DATABASE_URL=postgresql://lens:lens_password@localhost:5432/lens
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
RETENTION_DAYS=180

# ===================
# Redis
# ===================
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=10

# ===================
# Authentication
# ===================
# AUTH_MODE: none (dev), psk (Docker Compose), jwt (portable/production)
AUTH_MODE=none

# PSK Mode: Pre-shared key tokens (one per scope)
# Each token grants access to specific API operations
# AUTH_TOKEN_SUBMIT=your-submit-token-here    # Scope: lens:submit
# AUTH_TOKEN_READ=your-read-token-here        # Scope: lens:read
# AUTH_TOKEN_ADMIN=your-admin-token-here      # Scope: lens:admin (includes all)

# JWT Mode: Validate JWT tokens with external identity provider
# AUTH_JWT_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----
# AUTH_JWT_JWKS_URL=https://your-idp.com/.well-known/jwks.json
# AUTH_JWT_ISSUER=https://your-idp.com
# AUTH_JWT_AUDIENCE=lens-api
# AUTH_JWT_SCOPE_CLAIM=scope

# ===================
# Rate Limiting
# ===================
RATE_LIMIT_PER_MIN=60
RATE_LIMIT_BURST=120
RATE_LIMIT_ENABLED=true

# ===================
# Queue Configuration
# ===================
RETRY_MAX=5
RETRY_BACKOFF=exponential_jitter
RETRY_BASE_DELAY_MS=2000
RETRY_MAX_DELAY_MS=30000
DLQ_ENABLED=true
CONSUMER_GROUP=lens-workers
CONSUMER_BATCH_SIZE=10

# ===================
# Feature Profile
# ===================
# Options: trend_follow_v1, crypto_perps_v1, full_v1
FEATURE_PROFILE=trend_follow_v1
TIMEFRAMES=15m,1h,4h

# ===================
# Stale Data Thresholds (seconds)
# ===================
STALE_MID_S=5
STALE_L2_S=10
STALE_CTX_S=60
STALE_CANDLE_MULTIPLIER=2

# ===================
# Market Data Providers
# ===================
PROVIDER_PRIMARY=hyperliquid
PROVIDER_TIMEOUT_MS=10000
PROVIDER_RETRY_COUNT=3
HYPERLIQUID_BASE_URL=https://api.hyperliquid.xyz
HYPERLIQUID_WS_URL=wss://api.hyperliquid.xyz/ws

# ===================
# AI Models
# ===================
# Set to true for production to use real AI models
# Set to false for development/testing (returns deterministic stub decisions)
USE_REAL_AI=false

# ===================
# WebSocket
# ===================
WS_ENABLED=true
WS_PING_INTERVAL_S=30
WS_PING_TIMEOUT_S=10
WS_MAX_CONNECTIONS=100

# ===================
# Observability
# ===================
METRICS_ENABLED=true
METRICS_PATH=/metrics
HEALTH_PATH=/health
READY_PATH=/ready
